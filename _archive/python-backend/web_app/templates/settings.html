<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="/static/style.css?v=2025-01-01">
</head>
<body class="{{ theme_class }}">
    <main class="container">
        <nav class="topbar">
            <div class="brand">
                <strong>Settings</strong>
                <a class="button ghost" href="/tools">Tools</a>
            </div>
            <div class="today">
                {% if current_person %}
                    Person: {{ current_person }}
                {% else %}
                    No person selected
                {% endif %}
            </div>
        </nav>

        <article class="panel">
            <div class="panel-header">
                <h3>Person</h3>
            </div>
            <p class="muted">
                Select the person root for this device. This choice is stored locally until changed.
            </p>
            <form method="post" action="/settings" class="form-row">
                {% for person in people %}
                    <button type="submit" name="person" value="{{ person }}" class="button ghost{% if current_person == person %} active{% endif %}">
                        {{ person | capitalize }}
                    </button>
                {% endfor %}
            </form>
            {% if not current_person %}
                <p class="muted">Pick a person to unlock the rest of the app.</p>
            {% endif %}
            <hr>
            <div class="panel-header">
                <h3>Theme</h3>
            </div>
            <p class="muted">Choose a color theme for this device.</p>
            <form method="post" action="/settings" class="form-row">
                <button type="submit" name="theme" value="dark" class="button ghost{% if current_theme == 'dark' %} active{% endif %}">
                    Dark
                </button>
                <button type="submit" name="theme" value="light" class="button ghost{% if current_theme == 'light' %} active{% endif %}">
                    Light
                </button>
            </form>
        </article>

        <article class="panel">
            <div class="panel-header">
                <h3>Server .env</h3>
            </div>
            <p class="muted">Edit environment variables stored in server/web_app/.env.</p>
            <form method="post" action="/settings/env">
                <textarea name="env_content" rows="12" style="width: 100%; font-family: monospace;">{{ env_content }}</textarea>
                <button type="submit" class="button" style="margin-top: 12px;">Save</button>
            </form>
        </article>
    </main>
</body>
</html>
